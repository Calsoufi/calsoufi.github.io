<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type='text/javascript'>
        let firebaseData = null;
    </script>
        <script type="module" src="main.js"></script>

    <!-- Firebase App (the core Firebase SDK) -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js"></script>

    <!-- Firebase Realtime Database -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js"></script>

    <!-- Reference to the Bing Maps SDK -->
    <script type='text/javascript'
        src='https://www.bing.com/api/maps/mapcontrol?callback=fetchData&key=Aj3FRa0xCnDa-nApre6YJSYnFPZU270tWHtgyrOeJ7oCpa_tGccKmPXMiEHULED8'></script>


</head>

<body>
    <script type='text/javascript'>

       
        function GetMap(places) {
            var map = new Microsoft.Maps.Map(document.getElementById('myMap'), {
                credentials: 'Aj3FRa0xCnDa-nApre6YJSYnFPZU270tWHtgyrOeJ7oCpa_tGccKmPXMiEHULED8',
                zoom: 4
            });

            var pushpins = [];
            var visitedCount = {};
            var activeInfobox;

            for (var i = 0; i < places.length; i++) {
                var location = new Microsoft.Maps.Location(places[i].latitude += (Math.random() - 0.5) * 0.010, places[i].longitude += (Math.random() - 0.5) * 0.010);
                var locationData = places[i];
                var color = places[i].countrycolor;


                var pin = new Microsoft.Maps.Pushpin(location, {
                    color: color,
                    anchor: new Microsoft.Maps.Point(12, 39),
                    title: locationData.city
                });

                Microsoft.Maps.Events.addHandler(pin, 'click', (function (locationData) {
                    return function (e) {
                        var infobox = new Microsoft.Maps.Infobox(e.target.getLocation(), {
                            title: locationData.city,
                            description: 'Date: ' + locationData.startdate + '<br>Country: ' + locationData.country,
                            htmlContent: '<div id="textdescription" style="background-color: ' + locationData.countrycolor + '; height: 100px; width: 100px;"> Date: ' + locationData.startdate + '<br>Country: ' + locationData.country + '</div>',
                            visible: true
                        });

                        if (activeInfobox) {
                            activeInfobox.setOptions({ visible: false });
                        }

                        activeInfobox = infobox;

                        map.entities.push(infobox);
                    };
                })(locationData));

                pushpins.push(pin);
            }

            //Load the Clustering module.
            Microsoft.Maps.loadModule("Microsoft.Maps.Clustering", function () {


                //Create a ClusterLayer and add it to the map.
                clusterLayer = new Microsoft.Maps.ClusterLayer(pushpins);
                map.layers.insert(clusterLayer);
            });
        }


    </script>
    <h1>Hello World</h1>
    <p>I'm hosted with GitHub Pages.</p>
    <div id="myMap" style="position:absolute; top:0; left:0; width:100%; height:100%;"></div>

    <div class="hover-panel">
        <h3>Create Location Data</h3>
        <form id="updateForm">
          <div class="form-group">
            <label for="hotel-name">Hotel Name:</label>
            <input type="text" id="hotel-name" name="hotel_name" required>
          </div>
      
          <div class="form-group">
            <label for="start-date">Start Date:</label>
            <input type="month" id="start-date" name="startdate" required>
          </div>
      
          <div class="form-group">
            <label for="city">City:</label>
            <input type="text" id="city" name="city" required>
          </div>
      
          <div class="form-group">
            <label for="country">Country:</label>
            <input type="text" id="country" name="country" required>
          </div>
      
          <div class="form-group">
            <label for="latitude">Latitude:</label>
            <input type="number" step="0.00000001" id="latitude" name="latitude" required>
          </div>
      
          <div class="form-group">
            <label for="longitude">Longitude:</label>
            <input type="number" step="0.00000001" id="longitude" name="longitude" required>
          </div>
      
          <div class="form-group">
            <label for="country-color">Country Color:</label>
            <input type="text" id="country-color" name="countrycolor" required>
          </div>
      
          <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" required></textarea>
          </div>
      
          <div class="form-group">
            <label for="amenities">Amenities:</label>
            <textarea id="amenities" name="amenities" required></textarea>
          </div>
      
          <div class="form-group">
            <label for="reviews">Reviews:</label>
            <textarea id="reviews" name="reviews" required></textarea>
          </div>
      
          <div class="form-group">
            <label for="star-rating">Star Rating:</label>
            <input type="number" step="0.1" id="star-rating" name="star_rating" required>
          </div>
      
          <div class="form-group">
            <label for="guid">GUID:</label>
            <input type="text" id="guid" name="guid" required>
          </div>
      
          <button type="submit">Update</button>
        </form>
      </div>
      
</body>

</html>